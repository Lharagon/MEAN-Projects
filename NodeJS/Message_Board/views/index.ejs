<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset="utf-8">
    <title>Message Board</title>
    <style media="screen">
      .commentSection {
        margin-left: 20px;
        font-size: 10px;
        font-family: arial;
      }
      main {
        width: 800px;
        margin: 0 auto;
      }
      header {
        border-bottom: 10px solid black;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>The Dojo Message Board</h1>
    </header>
    <main>
      <form id="messageForm" action="/addMessage" method="post">
        <label for="name">Name:</label> <br>
        <input type="text" name="name" id="name"> <br>
        <label for="message">Message:</label><br>
        <textarea name="message" rows="8" cols="80" id="message"></textarea><br>
        <input type="submit" value="Post message">
      </form>
      <% for (var i = messages.length - 1; i >= 0; i--) { %>
      <div class="messageContainer">
        <h2>Name: <%= messages[i].name %> </h2>
        <h3>Message: <%= messages[i].text %> </h3>
        <div class="commentSection">
          <% for (var j = messages[i].comments.length - 1; j >= 0; j--) { %>
          <p>Name: <%= messages[i].comments[j].name %></p>
          <p>Comment: <%= messages[i].comments[j].text %></p>
          <% } %>
          <form class="commentForm" action="/comment/<%= messages[i].id %>" method="post">
            <label for="name">Name:</label> <br>
            <input type="text" name="name"> <br>
            <label for="comment">Comment:</label><br>
            <textarea name="comment" rows="4" cols="40"></textarea><br>
            <input type="submit" value="Post comment">
          </form>
        </div>

      </div>
      <% } %>
    </main>

  </body>
</html>
